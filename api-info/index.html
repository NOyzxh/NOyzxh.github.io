{"posts":[{"fileName":"test","abstract":"","description":"test ","title":"test","tags":[{"index":-1,"name":"随笔","slug":"wQ9CEdhmu","used":true,"link":"https://redteamblog.icu/tag/wQ9CEdhmu/"}],"feature":"","link":"https://redteamblog.icu/post/test/","stats":{"text":"1 min read","time":0,"words":1,"minutes":1},"isTop":false,"toc":"","date":"2022-05-31 09:52:46","dateFormat":"2022-05-31"},{"fileName":"域委派","abstract":"","description":"本篇文章主要是对域渗透中的委派利用手法进行总结，但是没有写基于资源的委派，等日后补吭。中间多多少少参考了一些网上的文章，文末给出参考链接。 域委派是指，将域内用户的权限委派给服务账号，使得服务账号能以用户权限开展域内活动。需要注意的是在域内...","title":"域委派利用","tags":[{"index":-1,"name":"内网渗透","slug":"McUKTZjbK","used":true,"link":"https://redteamblog.icu/tag/McUKTZjbK/"}],"feature":"https://api.ixiaowai.cn/api/api.php?=8","link":"https://redteamblog.icu/post/域委派/","stats":{"text":"23 min read","time":1355000,"words":5548,"minutes":23},"isTop":false,"toc":"<ul class=\"markdownIt-TOC\">\n<li>\n<ul>\n<li><a href=\"#%E5%A7%94%E6%B4%BE%E5%89%8D%E6%8F%90\">委派前提</a></li>\n<li><a href=\"#%E9%9D%9E%E7%BA%A6%E6%9D%9F%E5%A7%94%E6%B4%BE\">非约束委派</a>\n<ul>\n<li><a href=\"#%E7%AE%80%E4%BB%8B%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95\">简介&amp;&amp;配置方法</a></li>\n<li><a href=\"#%E9%9D%9E%E7%BA%A6%E6%9D%9F%E5%A7%94%E6%B4%BE%E6%B5%81%E7%A8%8B\">非约束委派流程</a></li>\n<li><a href=\"#%E6%9F%A5%E6%89%BE%E5%9F%9F%E4%B8%AD%E9%85%8D%E7%BD%AE%E9%9D%9E%E7%BA%A6%E6%9D%9F%E5%A7%94%E6%B4%BE%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%9C%8D%E5%8A%A1%E8%B4%A6%E6%88%B7\">查找域中配置非约束委派的主机/服务账户</a>\n<ul>\n<li><a href=\"#adfind%E5%8F%AF%E5%9C%A8%E5%9F%9F%E5%A4%96%E6%9F%A5%E8%AF%A2\">AdFind（可在域外查询）</a></li>\n<li><a href=\"#sharpldapsearch\">SharpLDAPSearch</a></li>\n<li><a href=\"#%E4%BD%BF%E7%94%A8powerviewps1\">使用PowerView.ps1</a></li>\n<li><a href=\"#sharpviewexe\">SharpView.exe</a></li>\n</ul>\n</li>\n<li><a href=\"#%E9%9D%9E%E7%BA%A6%E6%9D%9F%E6%80%A7%E5%A7%94%E6%B4%BE%E6%94%BB%E5%87%BB%E5%88%A9%E7%94%A8\">非约束性委派攻击利用</a>\n<ul>\n<li><a href=\"#%E5%88%A9%E7%94%A8%E5%9C%BA%E6%99%AF\">利用场景</a></li>\n<li><a href=\"#%E5%88%A9%E7%94%A8%E5%89%8D%E6%8F%90\">利用前提</a></li>\n<li><a href=\"#%E6%A8%A1%E6%8B%9F%E5%9F%9F%E7%AE%A1%E5%8E%BB%E8%AE%BF%E9%97%AE%E9%9D%9E%E7%BA%A6%E6%9D%9F%E6%80%A7%E5%A7%94%E6%B4%BE%E4%B8%BB%E6%9C%BA\">模拟域管去访问非约束性委派主机</a></li>\n</ul>\n</li>\n<li><a href=\"#%E9%9D%9E%E7%BA%A6%E6%9D%9F%E5%A7%94%E6%B4%BEspooler%E5%88%A9%E7%94%A8\">非约束委派+Spooler利用</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%BA%A6%E6%9D%9F%E5%A7%94%E6%B4%BE\">约束委派</a>\n<ul>\n<li><a href=\"#%E7%AE%80%E4%BB%8B%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95-2\">简介&amp;配置方法</a></li>\n<li><a href=\"#%E5%B0%8F%E6%8F%90%E7%A4%BA\"><strong>小提示</strong></a></li>\n<li><a href=\"#%E7%BA%A6%E6%9D%9F%E5%A7%94%E6%B4%BE%E6%B5%81%E7%A8%8B\">约束委派流程</a></li>\n<li><a href=\"#%E6%9F%A5%E6%89%BE%E5%9F%9F%E4%B8%AD%E9%85%8D%E7%BD%AE%E7%BA%A6%E6%9D%9F%E5%A7%94%E6%B4%BE%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%9C%8D%E5%8A%A1%E8%B4%A6%E6%88%B7\">查找域中配置约束委派的主机/服务账户</a>\n<ul>\n<li><a href=\"#adfind%E5%8F%AF%E5%9C%A8%E5%9F%9F%E5%A4%96%E6%9F%A5%E8%AF%A2-2\">AdFind（可在域外查询）</a></li>\n<li><a href=\"#sharpldapsearch-2\">SharpLDAPSearch</a></li>\n<li><a href=\"#powerviewps1\">PowerView.ps1</a></li>\n<li><a href=\"#sharpviewexe-2\">SharpView.exe</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%BA%A6%E6%9D%9F%E6%80%A7%E5%A7%94%E6%B4%BE%E6%94%BB%E5%87%BB%E5%88%A9%E7%94%A8\">约束性委派攻击利用</a>\n<ul>\n<li><a href=\"#%E4%BD%BF%E7%94%A8kekeo\">使用kekeo</a></li>\n<li><a href=\"#%E4%BD%BF%E7%94%A8rubeus\">使用Rubeus</a></li>\n<li><a href=\"#%E4%BD%BF%E7%94%A8impacket%E5%8C%85\">使用impacket包</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E5%8F%82%E8%80%83\">参考</a></li>\n</ul>\n","date":"2022-05-30 10:22:35","dateFormat":"2022-05-30"},{"fileName":"使用Mimikatz读取SAM和SYSTEM文件中的NTLM-HASH","abstract":"","description":"场景 已获取system权限，有杀毒难以突破的时候，这个时候可以通过reg命令导出SAM和SYSTEM文件来离线解密。 利用方式 1.首先导出两个文件。 reg save hklm\\sam sam.hive reg save hklm\\sy...","title":"使用Mimikatz读取SAM和SYSTEM文件中的NTLM-HASH","tags":[{"index":-1,"name":"渗透测试","slug":"-uEIOBB-D","used":true,"link":"https://redteamblog.icu/tag/-uEIOBB-D/"}],"feature":"https://api.ixiaowai.cn/api/api.php?=9","link":"https://redteamblog.icu/post/使用Mimikatz读取SAM和SYSTEM文件中的NTLM-HASH/","stats":{"text":"1 min read","time":29000,"words":120,"minutes":1},"isTop":false,"toc":"<ul class=\"markdownIt-TOC\">\n<li><a href=\"#%E5%9C%BA%E6%99%AF\">场景</a>\n<ul>\n<li><a href=\"#%E5%88%A9%E7%94%A8%E6%96%B9%E5%BC%8F\">利用方式</a></li>\n<li><a href=\"#%E5%8F%82%E8%80%83\">参考</a></li>\n</ul>\n</li>\n</ul>\n","date":"2022-05-27 18:35:55","dateFormat":"2022-05-27"},{"fileName":"sqlpsexe-bai-ming-dan-de-li-yong-guo-360","abstract":"","description":"目录位置 C:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\sqlps.exe C:\\Program Files (x86)\\Microsoft SQL Server\\11...","title":"sqlps.exe白名单的利用（过360！）","tags":[{"index":-1,"name":"渗透测试","slug":"-uEIOBB-D","used":true,"link":"https://redteamblog.icu/tag/-uEIOBB-D/"}],"feature":"https://api.ixiaowai.cn/api/api.php?=7","link":"https://redteamblog.icu/post/sqlpsexe-bai-ming-dan-de-li-yong-guo-360/","stats":{"text":"2 min read","time":84000,"words":233,"minutes":2},"isTop":false,"toc":"<ul class=\"markdownIt-TOC\">\n<li><a href=\"#sqlps%E6%89%A7%E8%A1%8C%E4%B8%8A%E7%BA%BF\">sqlps执行上线</a></li>\n<li><a href=\"#%E7%BB%95%E8%BF%87360\">绕过360</a></li>\n<li><a href=\"#%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4\">执行命令：</a></li>\n<li><a href=\"#%E5%8F%82%E8%80%83\">参考</a></li>\n</ul>\n","date":"2022-05-27 10:22:35","dateFormat":"2022-05-27"},{"fileName":"APP安全测试-模拟器踩坑记","abstract":"","description":"模拟器选择 1.逍遥模拟器（以弃用） //原因是因为做好环境之后开机总是提示你重新修复环境。 2.雷电模拟器（现用） //有一个问题就是4.0的雷电模拟器挂了WIFI代理之后失效，需要使用ADB增加代理或者使用profile之类的软件进行中...","title":"APP安全测试-模拟器环境配置","tags":[{"index":-1,"name":"渗透测试","slug":"-uEIOBB-D","used":true,"link":"https://redteamblog.icu/tag/-uEIOBB-D/"}],"feature":"https://api.ixiaowai.cn/api/api.php?=6","link":"https://redteamblog.icu/post/APP安全测试-模拟器踩坑记/","stats":{"text":"4 min read","time":189000,"words":818,"minutes":4},"isTop":false,"toc":"<ul class=\"markdownIt-TOC\">\n<li>\n<ul>\n<li><a href=\"#%E6%A8%A1%E6%8B%9F%E5%99%A8%E9%80%89%E6%8B%A9\">模拟器选择</a></li>\n<li><a href=\"#%E7%89%88%E6%9C%AC%E7%9A%84%E9%80%89%E6%8B%A9\">版本的选择</a></li>\n<li><a href=\"#%E8%AF%81%E4%B9%A6%E9%85%8D%E7%BD%AE\">证书配置</a></li>\n<li><a href=\"#%E5%AE%89%E8%A3%85xpoesd%E6%A1%86%E6%9E%B6\">安装Xpoesd框架</a></li>\n<li><a href=\"#%E7%BB%95%E8%BF%87%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81\">绕过双向验证</a></li>\n<li><a href=\"#%E9%9B%B7%E7%94%B5%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%A2%9E%E5%8A%A0%E4%BB%A3%E7%90%86\">雷电模拟器增加代理</a></li>\n</ul>\n</li>\n</ul>\n","date":"2022-05-20 14:35:55","dateFormat":"2022-05-20"},{"fileName":"CVE-2019-1388：通过 UAC 进行 Windows 提权","abstract":"","description":"CVE-2019-1388：通过 UAC 进行 Windows 提权 0x01 漏洞介绍 CVE-2019-1388 | Windows证书对话框特权提升漏洞发布时间：11/12/2019如果 Windows 证书对话框没有正确执行用户特...","title":"CVE-2019-1388：通过 UAC 进行 Windows 提权","tags":[{"index":-1,"name":"提权","slug":"getsystem","used":true,"link":"https://redteamblog.icu/tag/getsystem/"}],"feature":"https://api.ixiaowai.cn/api/api.php?=5","link":"https://redteamblog.icu/post/CVE-2019-1388：通过 UAC 进行 Windows 提权/","stats":{"text":"11 min read","time":617000,"words":2602,"minutes":11},"isTop":false,"toc":"<ul class=\"markdownIt-TOC\">\n<li><a href=\"#cve-2019-1388%E9%80%9A%E8%BF%87-uac-%E8%BF%9B%E8%A1%8C-windows-%E6%8F%90%E6%9D%83\">CVE-2019-1388：通过 UAC 进行 Windows 提权</a></li>\n<li><a href=\"#0x01-%E6%BC%8F%E6%B4%9E%E4%BB%8B%E7%BB%8D\">0x01 漏洞介绍</a></li>\n<li><a href=\"#0x02-%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86\">0x02 漏洞原理</a></li>\n<li><a href=\"#0x03-%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E5%AE%9E%E4%BE%8B\">0x03 漏洞利用实例</a></li>\n<li><a href=\"#%E5%85%B6%E4%BA%8C%E8%A7%A3%E6%9E%90%E6%96%87%E7%AB%A0\">其二解析文章</a>\n<ul>\n<li><a href=\"#cve-2019-1388\"><strong>CVE-2019-1388</strong></a></li>\n<li><a href=\"#%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86\"><strong>漏洞原理</strong></a></li>\n<li><a href=\"#%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8\"><strong>漏洞利用</strong></a></li>\n<li><a href=\"#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99\"><strong>参考资料</strong></a></li>\n</ul>\n</li>\n<li><a href=\"#%E8%87%AA%E6%88%91%E6%B5%8B%E8%AF%95\">自我测试</a></li>\n</ul>\n","date":"2022-05-16 14:35:55","dateFormat":"2022-05-16"},{"fileName":"CVE-2022-1388 F5 BIG-IP未授权RCE漏洞&写Webshell","abstract":"","description":"漏洞描述 漏洞描述: 在 F5 BIG-IP 16.1.x 16.1.2.2 之前的版本、15.1.5.1 之前的 15.1.x 版本、14.1.4.6 之前的 14.1.x 版本、13.1.5 之前的 13.1.x 版本以及所有 12.1...","title":"CVE-2022-1388 F5 BIG-IP未授权RCE漏洞&写Webshell","tags":[{"index":-1,"name":"渗透测试","slug":"-uEIOBB-D","used":true,"link":"https://redteamblog.icu/tag/-uEIOBB-D/"}],"feature":"https://api.ixiaowai.cn/api/api.php?=3","link":"https://redteamblog.icu/post/CVE-2022-1388 F5 BIG-IP未授权RCE漏洞&写Webshell/","stats":{"text":"2 min read","time":77000,"words":265,"minutes":2},"isTop":false,"toc":"<ul class=\"markdownIt-TOC\">\n<li>\n<ul>\n<li><a href=\"#%E6%BC%8F%E6%B4%9E%E6%8F%8F%E8%BF%B0\">漏洞描述</a></li>\n<li><a href=\"#%E5%A4%8D%E7%8E%B0%E8%BF%87%E7%A8%8B\">复现过程</a></li>\n<li><a href=\"#exppoc\">EXP/POC</a></li>\n<li><a href=\"#webshell%E5%86%99%E5%85%A5\">Webshell写入</a></li>\n<li><a href=\"#%E5%8F%82%E8%80%83\">参考</a></li>\n</ul>\n</li>\n</ul>\n","date":"2022-05-10 14:35:55","dateFormat":"2022-05-10"},{"fileName":"gongyingshangmanyou","abstract":"","description":"因涉及敏感信息较多，厚码见谅。 最近一段时间有个项目，当时对某个单位目标进行了信息收集，该系统是一个邮件系统。 目标：XXX.gov.cn 某个政务级目标 系统：自建的邮件服务系统 系统有滑块验证，因此从web爆破邮箱的作用不大，同时，服务...","title":"记一次供应商到目标之旅","tags":[{"index":-1,"name":"渗透测试","slug":"-uEIOBB-D","used":true,"link":"https://redteamblog.icu/tag/-uEIOBB-D/"}],"feature":"https://api.ixiaowai.cn/api/api.php?=2","link":"https://redteamblog.icu/post/gongyingshangmanyou/","stats":{"text":"7 min read","time":365000,"words":1780,"minutes":7},"isTop":false,"toc":"<ul class=\"markdownIt-TOC\">\n<li>\n<ul>\n<li><a href=\"#0x2-%E4%BE%9B%E5%BA%94%E5%95%86%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86\">0x2 供应商信息收集</a></li>\n<li><a href=\"#0x3-%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86\">0x3 员工信息收集</a></li>\n<li><a href=\"#0x4-%E5%8D%8F%E5%90%8C%E8%BD%AF%E4%BB%B6%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86\">0x4 协同软件信息收集</a></li>\n<li><a href=\"#0x5-%E6%8B%BF%E5%88%B0%E7%9B%AE%E6%A0%87\">0x5 拿到目标</a></li>\n<li><a href=\"#0x6-%E6%80%BB%E7%BB%93\">0x6 总结</a></li>\n</ul>\n</li>\n</ul>\n","date":"2022-05-08 14:35:55","dateFormat":"2022-05-08"},{"fileName":"41016eb03b2343a69a9be35f251f1e9c","abstract":"","description":"一些获取Windows明文凭据的方法 0x00 方法 1. Mimikatz直接读取Lsass 2. 签名/白名单文件Dump (1) AvDump.exe (2) CreateDump.exe (3) Rundll32.exe ...","title":"一些获取Windows明文凭据的方法","tags":[{"index":-1,"name":"渗透测试","slug":"-uEIOBB-D","used":true,"link":"https://redteamblog.icu/tag/-uEIOBB-D/"}],"feature":"https://api.ixiaowai.cn/api/api.php?=1","link":"https://redteamblog.icu/post/41016eb03b2343a69a9be35f251f1e9c/","stats":{"text":"14 min read","time":816000,"words":3185,"minutes":14},"isTop":false,"toc":"<ul class=\"markdownIt-TOC\">\n<li><a href=\"#%E4%B8%80%E4%BA%9B%E8%8E%B7%E5%8F%96windows%E6%98%8E%E6%96%87%E5%87%AD%E6%8D%AE%E7%9A%84%E6%96%B9%E6%B3%95\">一些获取Windows明文凭据的方法</a>\n<ul>\n<li><a href=\"#0x00-%E6%96%B9%E6%B3%95\">0x00 方法</a>\n<ul>\n<li><a href=\"#1-mimikatz%E7%9B%B4%E6%8E%A5%E8%AF%BB%E5%8F%96lsass\">1. Mimikatz直接读取Lsass</a></li>\n<li><a href=\"#2-%E7%AD%BE%E5%90%8D%E7%99%BD%E5%90%8D%E5%8D%95%E6%96%87%E4%BB%B6dump\">2. 签名/白名单文件Dump</a></li>\n<li><a href=\"#1-avdumpexe\">(1) AvDump.exe</a></li>\n<li><a href=\"#2-createdumpexe\">(2) CreateDump.exe</a></li>\n<li><a href=\"#3-rundll32exe\">(3) Rundll32.exe</a></li>\n<li><a href=\"#3-%E5%88%A9%E7%94%A8silentprocessexit%E8%BF%9B%E8%A1%8Cdump\">3. 利用SilentProcessExit进行Dump</a></li>\n<li><a href=\"#4-%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84ssp\">4. 添加自定义的SSP</a></li>\n<li><a href=\"#1-%E4%BD%BF%E7%94%A8memssp%E5%AF%B9lsass%E8%BF%9B%E8%A1%8Cpatch\">(1) 使用MemSSP对lsass进行patch</a></li>\n<li><a href=\"#2-%E4%BD%BF%E7%94%A8addsecuritypackage%E5%8A%A0%E8%BD%BDssp\">(2) 使用AddSecurityPackage加载SSP</a></li>\n<li><a href=\"#3-%E9%80%9A%E8%BF%87rpc%E5%8A%A0%E8%BD%BDssp\">(3) 通过RPC加载SSP</a></li>\n</ul>\n</li>\n<li><a href=\"#0x01-%E5%AE%9E%E7%8E%B0\">0x01 实现</a>\n<ul>\n<li><a href=\"#1-%E7%BC%96%E5%86%99dump-lsass%E7%9A%84dll\">1. 编写Dump Lsass的DLL</a></li>\n<li><a href=\"#2-%E5%B0%86dll%E4%B8%8Eexe%E6%96%87%E4%BB%B6%E6%89%93%E5%8C%85\">2. 将DLL与EXE文件打包</a></li>\n<li><a href=\"#3-%E5%B0%86%E8%BF%9B%E7%A8%8Bdump%E5%88%B0%E5%86%85%E5%AD%98\">3. 将进程dump到内存</a></li>\n<li><a href=\"#4-x86%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%88%A9%E7%94%A8rpc%E5%8A%A0%E8%BD%BDssp\">4. x86环境下利用RPC加载SSP</a></li>\n<li><a href=\"#5-%E5%85%B6%E5%AE%83%E5%8F%AF%E8%83%BD%E7%94%A8%E5%88%B0%E7%9A%84%E4%BC%98%E5%8C%96%E6%80%9D%E8%B7%AF\">5. 其它可能用到的优化思路</a></li>\n</ul>\n</li>\n<li><a href=\"#0x02-%E5%8F%AF%E8%83%BD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98\">0x02 可能遇到的问题</a>\n<ul>\n<li><a href=\"#1-%E7%BC%BA%E5%B0%91vc%E8%BF%90%E8%A1%8C%E5%BA%93\">1. 缺少VC运行库</a></li>\n<li><a href=\"#2-dump%E6%96%87%E4%BB%B6%E4%BD%93%E7%A7%AF%E8%BF%87%E5%A4%A7\">2. dump文件体积过大</a></li>\n</ul>\n</li>\n<li><a href=\"#0x03-%E6%80%BB%E7%BB%93\">0x03 总结</a></li>\n</ul>\n</li>\n</ul>\n","date":"2022-04-29 14:35:55","dateFormat":"2022-04-29"},{"fileName":"kerberos","abstract":"","description":"环境 目前环境有两台机器， 其一为Windows2008，IP为192.168.1.3 是域redream的成员。 其二为Windows2016，为域控制器。IP为 192.168.1.2 主机 用户 IP 域控（2016...","title":"Kerberos认证协议学习","tags":[{"index":-1,"name":"内网渗透","slug":"McUKTZjbK","used":true,"link":"https://redteamblog.icu/tag/McUKTZjbK/"}],"feature":"https://redteamblog.icu/post-images/kerberos.jpg","link":"https://redteamblog.icu/post/kerberos/","stats":{"text":"34 min read","time":2005000,"words":8688,"minutes":34},"isTop":false,"toc":"<ul class=\"markdownIt-TOC\">\n<li>\n<ul>\n<li><a href=\"#%E7%8E%AF%E5%A2%83\">环境</a></li>\n<li><a href=\"#kerberos%E5%8D%8F%E8%AE%AE\">kerberos协议</a>\n<ul>\n<li><a href=\"#kerberos-%E6%A6%82%E5%BF%B5%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A\">kerberos 概念名词解释</a></li>\n</ul>\n</li>\n<li><a href=\"#kerberos%E8%AE%A4%E8%AF%81%E7%9A%84%E9%97%AE%E9%A2%98\"><strong>kerberos认证的问题</strong></a></li>\n<li><a href=\"#kerberos%E8%AE%A4%E8%AF%81%E5%8D%8F%E8%AE%AE%E5%8E%9F%E7%90%86%E6%B5%81%E7%A8%8B\">kerberos认证协议原理流程</a></li>\n<li><a href=\"#as_req-as_rep%E5%88%86%E6%9E%90\">AS_REQ &amp; AS_REP分析</a>\n<ul>\n<li><a href=\"#1as-req\">1.AS-REQ</a></li>\n<li><a href=\"#2as-req%E4%B8%8D%E5%90%8C%E7%9A%84%E5%8C%85\">2.AS-REQ不同的包</a>\n<ul>\n<li><a href=\"#%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81%E6%AD%A3%E7%A1%AE%E7%9A%84%E5%8C%85\">用户名和密码正确的包</a></li>\n<li><a href=\"#%E7%94%A8%E6%88%B7%E5%90%8D%E4%B8%8D%E6%AD%A3%E7%A1%AE%E7%9A%84%E5%8C%85\">用户名不正确的包</a></li>\n<li><a href=\"#%E7%94%A8%E6%88%B7%E5%90%8D%E6%AD%A3%E7%A1%AE%E7%9A%84%E5%8C%85\">用户名正确的包</a></li>\n<li><a href=\"#%E5%AF%86%E7%A0%81%E4%B8%8D%E6%AD%A3%E7%A1%AE%E7%9A%84%E5%8C%85\">密码不正确的包</a></li>\n<li><a href=\"#as-req%E6%B5%81%E7%A8%8B%E7%9A%84%E7%9A%84%E6%94%BB%E5%87%BB%E9%9D%A2\">AS-REQ流程的的攻击面</a>\n<ul>\n<li><a href=\"#hash%E4%BC%A0%E9%80%92%E6%94%BB%E5%87%BB%E6%96%B9%E6%B3%95\"><strong>HASH传递攻击方法</strong></a>\n<ul>\n<li><a href=\"#mimikatz%E8%BF%9B%E8%A1%8Chash%E4%BC%A0%E9%80%92\">mimikatz进行hash传递</a></li>\n<li><a href=\"#%E6%89%A7%E8%A1%8C%E4%BC%A0%E9%80%92\">执行传递</a></li>\n<li><a href=\"#kb2871997%E8%A1%A5%E4%B8%81%E7%9A%84%E4%BC%A0%E9%80%92%E6%96%B9%E6%B3%95\">KB2871997补丁的传递方法</a></li>\n<li><a href=\"#ptkpass-the-key\">PTK（pass the key）</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%9F%9F%E5%86%85%E7%94%A8%E6%88%B7%E6%9E%9A%E4%B8%BE\"><strong>域内用户枚举</strong></a>\n<ul>\n<li><a href=\"#%E6%94%BB%E5%87%BB%E6%96%B9%E6%B3%95\">攻击方法</a></li>\n<li><a href=\"#%E5%8E%9F%E7%90%86\">原理：</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%AF%86%E7%A0%81%E5%96%B7%E6%B4%92\"><strong>密码喷洒</strong></a></li>\n<li><a href=\"#%E5%8E%9F%E7%90%86-2\">原理：</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#as-rep%E6%95%B0%E6%8D%AE%E5%8C%85\">AS-REP数据包</a>\n<ul>\n<li><a href=\"#as-rep%E7%9A%84%E6%94%BB%E5%87%BB%E9%9D%A2\">AS-REP的攻击面</a>\n<ul>\n<li><a href=\"#%E9%BB%84%E9%87%91%E7%A5%A8%E6%8D%AE\"><strong>黄金票据</strong></a></li>\n<li><a href=\"#%E9%BB%84%E9%87%91%E7%A5%A8%E6%8D%AE%E6%94%BB%E5%87%BB%E5%AE%9E%E8%B7%B5\">黄金票据攻击实践</a>\n<ul>\n<li><a href=\"#%E6%94%B6%E9%9B%86%E5%9F%9F%E4%BF%A1%E6%81%AF\">收集域信息</a></li>\n<li><a href=\"#%E5%AF%BC%E5%87%BAhash\">导出HASH</a></li>\n<li><a href=\"#%E6%94%B6%E9%9B%86krbtgt%E7%9A%84sid%E4%BF%A1%E6%81%AF\">收集Krbtgt的SID信息</a></li>\n<li><a href=\"#%E5%88%A9%E7%94%A8mimikatz%E7%94%9F%E6%88%90%E9%BB%84%E9%87%91%E7%A5%A8%E6%8D%AE\">利用mimikatz生成黄金票据</a></li>\n<li><a href=\"#%E6%9F%A5%E7%9C%8B%E5%AF%BC%E5%85%A5%E7%9A%84%E7%A5%A8%E6%8D%AE\">查看导入的票据</a></li>\n<li><a href=\"#%E6%9F%A5%E8%AF%A2dc%E6%9C%BA%E5%99%A8c%E7%9B%98%E7%9B%AE%E5%BD%95\">查询DC机器C盘目录</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#tgs_reqtgs_rep%E5%88%86%E6%9E%90\">TGS_REQ&amp;TGS_REP分析</a>\n<ul>\n<li><a href=\"#tgs-req%E6%95%B0%E6%8D%AE%E5%8C%85%E5%88%86%E6%9E%90\"><strong>TGS-REQ数据包分析</strong></a>\n<ul>\n<li><a href=\"#tgs-rep%E6%95%B0%E6%8D%AE%E5%8C%85%E5%88%86%E6%9E%90\"><strong>TGS-REP数据包</strong>分析</a>\n<ul>\n<li><a href=\"#tgs-rep%E7%9A%84%E6%94%BB%E5%87%BB%E9%9D%A2\">TGS-REP的攻击面</a>\n<ul>\n<li><a href=\"#1kerberoast%E6%94%BB%E5%87%BB\">1.Kerberoast攻击</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#spn\">SPN</a>\n<ul>\n<li><a href=\"#%E6%9F%A5%E8%AF%A2spn\">查询SPN</a></li>\n<li><a href=\"#%E4%BD%BF%E7%94%A8setspn\">使用SetSPN</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%AE%9E%E7%8E%B0kerberoasting%E6%94%BB%E5%87%BB%E7%9A%84%E5%89%8D%E6%8F%90\">实现Kerberoasting攻击的前提</a>\n<ul>\n<li><a href=\"#%E7%94%B3%E8%AF%B7st%E7%A5%A8%E6%8D%AE\">申请ST票据</a>\n<ul>\n<li><a href=\"#%E4%BD%BF%E7%94%A8powershell%E5%91%BD%E4%BB%A4%E8%AF%B7%E6%B1%82\">使用Powershell命令请求</a></li>\n<li><a href=\"#%E4%BD%BF%E7%94%A8mimikatz%E8%AF%B7%E6%B1%82\">使用mimikatz请求</a></li>\n<li><a href=\"#%E4%BD%BF%E7%94%A8impacket%E4%B8%AD%E7%9A%84getuserspns%E8%AF%B7%E6%B1%82\">使用Impacket中的GetUserSPNs请求</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%AF%BC%E5%87%BA%E6%9C%8D%E5%8A%A1%E7%A5%A8%E6%8D%AE\">导出服务票据</a></li>\n<li><a href=\"#%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3\">暴力破解</a>\n<ul>\n<li><a href=\"#%E6%9C%8D%E5%8A%A1%E7%A5%A8%E6%8D%AE%E9%87%8D%E5%86%99ram%E6%B3%A8%E5%85%A5\">服务票据重写&amp;RAM注入</a></li>\n<li><a href=\"#%E5%8F%82%E8%80%83\">参考</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E7%99%BD%E9%93%B6%E7%A5%A8%E6%8D%AE\">白银票据</a>\n<ul>\n<li><a href=\"#%E7%99%BD%E9%93%B6%E7%A5%A8%E6%8D%AE%E7%9A%84%E7%89%B9%E7%82%B9\">白银票据的特点</a>\n<ul>\n<li><a href=\"#%E7%99%BD%E9%93%B6%E7%A5%A8%E6%8D%AE%E5%92%8C%E9%BB%84%E9%87%91%E7%A5%A8%E6%8D%AE%E5%8C%BA%E5%88%AB\">白银票据和黄金票据区别</a></li>\n<li><a href=\"#%E7%99%BD%E9%93%B6%E7%A5%A8%E6%8D%AE%E5%AE%9E%E8%B7%B5\">白银票据实践</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%99%BD%E9%93%B6%E7%A5%A8%E6%8D%AE%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%88%97%E8%A1%A8\"><strong>白银票据的服务列表</strong></a></li>\n</ul>\n</li>\n<li><a href=\"#%E4%BC%AA%E9%80%A0cifs\">伪造CIFS</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#kerberos%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%90%84%E9%98%B6%E6%AE%B5%E6%94%BB%E5%87%BB%E6%89%8B%E6%B3%95\">Kerberos协议的各阶段攻击手法</a></li>\n<li><a href=\"#ms14-068%E5%9F%9F%E6%8F%90%E6%9D%83\">MS14-068域提权</a>\n<ul>\n<li><a href=\"#%E5%88%A9%E7%94%A8ms14-068exe-%E5%B7%A5%E5%85%B7%E7%94%9F%E6%88%90%E4%BC%AA%E9%80%A0%E7%9A%84kerberos%E5%8D%8F%E8%AE%AE%E8%AE%A4%E8%AF%81%E8%AF%81%E4%B9%A6\">利用ms14-068.exe 工具生成伪造的kerberos协议认证证书</a></li>\n<li><a href=\"#%E4%BD%BF%E7%94%A8psexecexe%E8%8E%B7%E5%8F%96%E4%B8%80%E4%B8%AA%E4%BA%A4%E4%BA%92%E5%BC%8Fshell\">使用psexec.exe获取一个交互式shell</a></li>\n<li><a href=\"#%E6%96%B9%E6%B3%952goldenpacexe%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8\">方法2：goldenPac.exe（推荐使用）</a></li>\n<li><a href=\"#%E6%96%B9%E6%B3%953kekeoexe\">方法3：kekeo.exe</a></li>\n<li><a href=\"#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9\">注意事项</a></li>\n<li><a href=\"#%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86\">漏洞原理：</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n","date":"2022-04-25 14:35:55","dateFormat":"2022-04-25"},{"fileName":"qian-tan-bypass-jin-shan-zhong-duan-an-quan-xi-tong-de-xin-lu-li-cheng","abstract":"","description":"关于金山终端的bypass心路历程 浅谈bypass金山终端安全系统的心路历程 1.漏洞详情 任意文件下载 /htmltopdf/downfile.php?filename=xxx /conf /.ssh ..... 任意文件上传 ...","title":"浅谈bypass金山终端安全系统的心路历程","tags":[{"index":-1,"name":"渗透测试","slug":"-uEIOBB-D","used":true,"link":"https://redteamblog.icu/tag/-uEIOBB-D/"}],"feature":"https://api.ixiaowai.cn/api/api.php?=99","link":"https://redteamblog.icu/post/qian-tan-bypass-jin-shan-zhong-duan-an-quan-xi-tong-de-xin-lu-li-cheng/","stats":{"text":"6 min read","time":334000,"words":1343,"minutes":6},"isTop":false,"toc":"<ul class=\"markdownIt-TOC\">\n<li><a href=\"#%E5%85%B3%E4%BA%8E%E9%87%91%E5%B1%B1%E7%BB%88%E7%AB%AF%E7%9A%84bypass%E5%BF%83%E8%B7%AF%E5%8E%86%E7%A8%8B\">关于金山终端的bypass心路历程</a><br>\n*\n<ul>\n<li><a href=\"#%E6%B5%85%E8%B0%88bypass%E9%87%91%E5%B1%B1%E7%BB%88%E7%AB%AF%E5%AE%89%E5%85%A8%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%BF%83%E8%B7%AF%E5%8E%86%E7%A8%8B\"><strong>浅谈bypass金山终端安全系统的心路历程</strong></a></li>\n<li><a href=\"#1%E6%BC%8F%E6%B4%9E%E8%AF%A6%E6%83%85\"><strong>1.漏洞详情</strong></a></li>\n<li><a href=\"#2getshell\"><strong>2.getshell</strong></a></li>\n<li><a href=\"#3%E8%8E%B7%E5%8F%96%E6%9D%83%E9%99%90\"><strong>3.获取权限</strong></a></li>\n<li><a href=\"#4%E5%B8%B8%E8%A7%81%E7%9A%84shellcode%E5%85%8D%E6%9D%80\"><strong>4.常见的shellcode免杀</strong></a></li>\n</ul>\n</li>\n</ul>\n","date":"2022-04-23 14:35:55","dateFormat":"2022-04-23"}],"tags":[{"index":-1,"name":"随笔","slug":"wQ9CEdhmu","used":true,"link":"https://redteamblog.icu/tag/wQ9CEdhmu/","count":1},{"index":-1,"name":"内网渗透","slug":"McUKTZjbK","used":true,"link":"https://redteamblog.icu/tag/McUKTZjbK/","count":2},{"index":-1,"name":"渗透测试","slug":"-uEIOBB-D","used":true,"link":"https://redteamblog.icu/tag/-uEIOBB-D/","count":7},{"index":-1,"name":"提权","slug":"getsystem","used":true,"link":"https://redteamblog.icu/tag/getsystem/","count":1}],"menus":[{"index":0,"link":"/","name":"😀首页","openType":"Internal"},{"link":"/posts","name":"文章列表","openType":"Internal"},{"index":1,"link":"/archives","name":"🤿归档","openType":"Internal"},{"index":2,"link":"/tags","name":"🏄‍♀️标签","openType":"Internal"},{"index":3,"link":"/post/about","name":"👹关于","openType":"Internal"}],"themeConfig":{"themeName":"Card","postPageSize":10,"archivesPageSize":50,"siteName":"🐳毅种循环","siteDescription":"</br>西郊有密林，助君出重围。</br>\n</br># WhoAmI</br>\n</br># 毅种循环</br>","footerInfo":"","showFeatureImage":true,"domain":"https://redteamblog.icu","postUrlFormat":"SLUG","tagUrlFormat":"SHORT_ID","dateFormat":"YYYY-MM-DD","feedFullText":false,"feedCount":10,"archivesPath":"archives","postPath":"post","tagPath":"tag"},"customConfig":{"Valine":"on","avatar_":"https://p1.meituan.net/csc/bc977e02a18501b80ffa80e266c16889451152.png","baidu":"on","bg":"#fefefe","bilibili":"","build_time":"2022-04-23","card_bg":"https://api.ixiaowai.cn/api/api.php?=991","copyright":"on","donate":"off","donate_alipay":"https://blog.itjoker.cn/alipay.jpg","donate_wechat":"https://blog.itjoker.cn/wechat.jpg","facebook":"","friends":[{"description":"缝合超人","siteLink":"https://www.cooyf.com","siteLogo":"https://q1.qlogo.cn/g?b=qq&nk=11367830&s=100","siteName":"国服第一缝合怪"}],"ga":"UA-226932280-1","github":"https://github.com/NOyzxh","icpcode":"","icpinfo":"","instagram":"","keywords":"毅种循环,Redteam,渗透测试","linkedin":"","music":"off","music_model":"normal","musics":[{"description":"","siteLink":"","siteLogo":"","siteName":""}],"platformLink":"https://redteamblog.icu","platformName":"洗剑录","qq":"","send":"https://t.me/yzxh7","sentence":"on","sidebars":[{"siteLcontentink":"","title":""}],"tumblr":"","twitter":"","valineAppId":"Ik52EhrTkYU8moKHOkLSm7bp-gzGzoHsz","valineAppKey":"o582DpzvYHyL0Gpu3SaatYO7","valineAvatar":"mp","valineHighlight":true,"valinePageSize":10,"valinePlaceholder":"来都来了，不妨评论一下","valineRecordIp":true,"valineVisitor":true,"view":"on","weather":"on","wechat":"","weibo":"","youtube":"","zhihu":""},"utils":{"now":1653964744272}}